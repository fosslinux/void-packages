# Template file for 'lightspark'
pkgname=lightspark
version=0.8.3
revision=1
build_style=cmake
hostmakedepends="nasm pkg-config gettext"
makedepends="MesaLib-devel glew-devel libcurl-devel ffmpeg-devel pcre-devel
 librtmp-devel cairo-devel SDL2-devel SDL2_mixer-devel libjpeg-turbo-devel
 pango-devel liblzma-devel glibmm-devel"
short_desc="Open source flash player implementation"
maintainer="fosslinux <fosslinux@aussies.space>"
license="LGPL-3.0-or-later"
homepage="https://lightspark.github.io"
distfiles="https://github.com/lightspark/lightspark/archive/${version}.tar.gz"
checksum=5276818e6d78ddf12a9304bc8c2ceeec0ca0759a99d56a4521e1fdc06893b1bd

if [ "$XBPS_TARGET_NO_ATOMIC8" ]; then
	makedepends+=" libatomic-devel"
	configure_args+=" -DCMAKE_CXX_STANDARD_LIBRARIES=-latomic"
fi

post_extract() {
	# Remove build script that we are using for the CMake directory
	rm build
}

do_check() {
	: # Requires a dumb piece of proprietary software that isn't even avaliable
}
